commentsApi
### CRUD для сервиса комментариев
В проекте используется авторизация по токену, который хранится в БД.Для авторизации нужно указать заголовок **Authorization**, значения ключа хранится в БД, типы запросов, которые могут использоваться с этим ключем указаны в поле grantedRequest  
Подключение к БД указано в *appsettings.json*  
### Модель токена
```json
{
    "id": "5e237a37411af70f08ccf5aa",
    "key": "zzz",
    "grantedRequest": "POST,GET,PUT,DELETE",
    "isActive": true
}
```
* **id** - автогенерируемый ключ mongoDB
* **key** - токен для доступа к CRUD
* **grantedRequest** - список запросов, к которым разрешен доступ с этим ключем
* **isActive** - состояние ключа


Для удобства тестирования в проекте есть CRUD для работы с этими ключами. Использовать только для тестирования!!!:  

**GET api/token/{tokenValue}** - получить объект с указанным токеном  
**POST api/token** - Создать новый токен. В теле передать указанную выше модель.  
**PUT api/token/{tokenValue}** - обновить объект с указанным токеном  
**DELETE api/token/{tokenValue}** - удалить объект с указанным токеном  


### Работа с комментариями  
Модель комментария:  

```json
{
    "id": "5e237b12effad2531ce36b35",
    "text": "hello",
    "dateCreate": "2020-01-18T21:39:30.165Z",
    "updatedOn": "2020-01-18T21:39:30.164Z",
    "createdOn": "2020-01-18T21:39:30.165Z",
    "author": "Alex",
    "topic": "TestComment"
}
```

**GET api/comment** - получить список всех комментариев   
**POST api/comment** - Создать новый комментарий. В ответ придет модель комментария с заполненным ID  
**PUT api/comment/{id}** - обновить комментарий  
**DELETE api/comment/{id}** - удалить комментарий    
**GET api/comment/export** - выгрузить список всех комментариев в csv файл. Название файла генерится в формате comments-{DateTime.Now}   
